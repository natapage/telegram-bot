# DevOps Roadmap

## –û–±–∑–æ—Ä

–≠—Ç–æ—Ç —Ä–æ–∞–¥–º–∞–ø –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–∞–∑–≤–∏—Ç–∏–µ DevOps –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ telegram-bot.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è MVP –ø–æ–¥—Ö–æ–¥: —Ñ–æ–∫—É—Å –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ç–µ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏, –±–µ–∑ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.

–¶–µ–ª—å: –ø—Ä–æ–π—Ç–∏ –ø—É—Ç—å –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –¥–æ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ.

## –°–ø—Ä–∏–Ω—Ç—ã

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ü–ª–∞–Ω |
|-----|----------|--------|------|
| D0 | Basic Docker Setup | ‚úÖ Completed | [–ø–ª–∞–Ω](plans/d0-docker-setup-plan.md) |
| D1 | Build & Publish | üöß In Progress | [–ø–ª–∞–Ω](plans/d1-build-publish-plan.md) |
| D2 | –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä | üìã Planned | - |
| D3 | Auto Deploy | üìã Planned | - |

**–õ–µ–≥–µ–Ω–¥–∞ —Å—Ç–∞—Ç—É—Å–æ–≤:**
- üìã Planned - –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ
- üöß In Progress - –≤ —Ä–∞–±–æ—Ç–µ
- ‚úÖ Completed - –∑–∞–≤–µ—Ä—à–µ–Ω–æ

---

## –°–ø—Ä–∏–Ω—Ç D0: Basic Docker Setup

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 18 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

### –¶–µ–ª–∏

–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ docker-compose –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π.

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ **Docker-–æ–±—Ä–∞–∑—ã**:
- `Dockerfile.bot` - Telegram –±–æ—Ç (Python 3.11 + UV)
- `Dockerfile.api` - FastAPI backend (Python 3.11 + UV)
- `Dockerfile.frontend` - Next.js frontend (Node 20 + pnpm)

‚úÖ **Docker Compose**:
- 3 —Å–µ—Ä–≤–∏—Å–∞: bot, api, frontend
- SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å volume –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- Restart policy: `unless-stopped`

‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
- `.dockerignore` (–∫–æ—Ä–Ω–µ–≤–æ–π –∏ –¥–ª—è frontend)
- `.env.example` —Å —à–∞–±–ª–æ–Ω–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- Makefile –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker

‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
- README.md –æ–±–Ω–æ–≤–ª–µ–Ω —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ Docker
- –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω: [plans/d0-docker-setup-plan.md](plans/d0-docker-setup-plan.md)
- –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏: [reports/d0-testing-report.md](reports/d0-testing-report.md)
- –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞: [reports/d0-summary.md](reports/d0-summary.md)

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite (MVP –ø–æ–¥—Ö–æ–¥, –ø—Ä–æ—Å—Ç–æ—Ç–∞)
- **Build strategy**: Single-stage builds (—Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **Volumes**: prompts, logs, telegram_bot.db
- **–ü–æ—Ä—Ç—ã**: API (8000), Frontend (3001)

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- ‚úÖ –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤: ~98 —Å–µ–∫—É–Ω–¥
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ API health check: OK
- ‚úÖ Frontend –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –æ—Ç–¥–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É
- ‚úÖ Bot –∑–∞–ø—É—â–µ–Ω

**–ù–∞–π–¥–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 3 –ø—Ä–æ–±–ª–µ–º—ã** –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–µ—Ç–∞–ª–∏ –≤ –æ—Ç—á–µ—Ç–µ)

---

## –°–ø—Ä–∏–Ω—Ç D1: Build & Publish

**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞**: 18 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å**: üöß –í —Ä–∞–±–æ—Ç–µ

### –¶–µ–ª–∏

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è Docker –æ–±—Ä–∞–∑–æ–≤ –≤ GitHub Container Registry.

### –°–æ—Å—Ç–∞–≤ —Ä–∞–±–æ—Ç

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ –°–æ–∑–¥–∞–Ω GitHub Actions workflow `.github/workflows/build.yml`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω trigger: push –≤ main + pull_request
- ‚úÖ Matrix strategy –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ 3 –æ–±—Ä–∞–∑–æ–≤ (bot, api, frontend)
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Docker layers –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- ‚úÖ –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: latest –∏ sha-XXXXXX
- ‚úÖ –°–æ–∑–¥–∞–Ω `docker-compose.registry.yml` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ –∏–∑ ghcr.io
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω Makefile —Å –∫–æ–º–∞–Ω–¥–∞–º–∏ –¥–ª—è registry
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: github-actions-intro.md, github-registry-setup.md
- ‚úÖ –°–æ–∑–¥–∞–Ω DOCKER_QUICKSTART.md
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω README.md —Å badge –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏

**–í –ø—Ä–æ—Ü–µ—Å—Å–µ**:
- ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ workflow –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
- ‚è≥ –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ public access

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è

- **CI/CD**: GitHub Actions —Å matrix strategy
- **Registry**: GitHub Container Registry (ghcr.io)
- **Visibility**: Public –æ–±—Ä–∞–∑—ã (–¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: GitHub Actions Cache –¥–ª—è Docker layers
- **–¢–µ–≥–∏**: latest (auto-update), sha (immutable)
- **–î–≤–∞ —Ä–µ–∂–∏–º–∞**: –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ (dev) –∏ registry (prod)

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã:**
- `.github/workflows/build.yml` ‚úÖ
- `docker-compose.registry.yml` ‚úÖ
- `devops/doc/guides/github-actions-intro.md` ‚úÖ
- `devops/doc/guides/github-registry-setup.md` ‚úÖ
- `devops/doc/plans/d1-build-publish-plan.md` ‚úÖ
- `DOCKER_QUICKSTART.md` ‚úÖ
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `README.md` —Å badges ‚úÖ
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `Makefile` ‚úÖ

---

## –°–ø—Ä–∏–Ω—Ç D2: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –¶–µ–ª–∏

–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –≤—Ä—É—á–Ω—É—é (–ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è).

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ì–æ—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω (–∞–¥—Ä–µ—Å + SSH –∫–ª—é—á, Docker —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω).

### –°–æ—Å—Ç–∞–≤ —Ä–∞–±–æ—Ç

- –°–æ–∑–¥–∞—Ç—å –ø–æ—à–∞–≥–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
- SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É —Å –ø–æ–º–æ—â—å—é SSH –∫–ª—é—á–∞
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ docker-compose.yml –∏ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- docker login –∫ ghcr.io
- docker-compose pull - –∑–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–∑–æ–≤
- docker-compose up -d - –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
- –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã:**
- `devops/doc/guides/manual-deploy.md` (–¥–µ—Ç–∞–ª—å–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)
- `.env.production` (—à–∞–±–ª–æ–Ω —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)
- `devops/scripts/deploy-check.sh` (—Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏)

---

## –°–ø—Ä–∏–Ω—Ç D3: Auto Deploy

### –¶–µ–ª–∏

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ GitHub Actions –ø–æ –∫–Ω–æ–ø–∫–µ.

### –°–æ—Å—Ç–∞–≤ —Ä–∞–±–æ—Ç

- –°–æ–∑–¥–∞—Ç—å GitHub Actions workflow `.github/workflows/deploy.yml`
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å trigger: —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (workflow_dispatch)
- SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É —Å –ø–æ–º–æ—â—å—é SSH –∫–ª—é—á–∞
- Pull –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π –æ–±—Ä–∞–∑–æ–≤
- Restart —Å–µ—Ä–≤–∏—Å–æ–≤ —á–µ—Ä–µ–∑ docker-compose
- –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ secrets (SSH_KEY, HOST, USER –≤ GitHub Actions)
- –î–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ –¥–µ–ø–ª–æ—è

**–û–∂–∏–¥–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã:**
- `.github/workflows/deploy.yml`
- `devops/doc/guides/auto-deploy-setup.md` (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub secrets)
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `README.md` —Å –∫–Ω–æ–ø–∫–æ–π "Deploy"

---

## –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ **Plan Mode**. –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ø—Ä–∏–Ω—Ç–∞:
1. –°–æ–∑–¥–∞–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `devops/doc/plans/`
2. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–ª–∞–Ω –≤ —Ç–∞–±–ª–∏—Ü–µ —Å–ø—Ä–∏–Ω—Ç–æ–≤ –≤—ã—à–µ
3. –°—Ç–∞—Ç—É—Å —Å–ø—Ä–∏–Ω—Ç–∞ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ ‚úÖ Completed

## –ü—Ä–∏–Ω—Ü–∏–ø—ã

- **MVP –ø–æ–¥—Ö–æ–¥**: –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞**: –Ω–µ–±–æ–ª—å—à–∏–µ —Å–ø—Ä–∏–Ω—Ç—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —Ü–µ–ª—è–º–∏
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –∫–∞–∂–¥—ã–π —Å–ø—Ä–∏–Ω—Ç —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –ø–ª–∞–Ω–æ–º –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- **–ë—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å –∫ production**: –æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –¥–æ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è –∑–∞ 4 —Å–ø—Ä–∏–Ω—Ç–∞
