# –°–ø—Ä–∏–Ω—Ç D1: Build & Publish - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 18 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

## –ë—ã—Å—Ç—Ä–∞—è —Å–≤–æ–¥–∫–∞

‚úÖ **GitHub Actions workflow** - —Å–æ–∑–¥–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É
‚úÖ **Docker Compose –¥–ª—è registry** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞
‚úÖ **Makefile –∫–æ–º–∞–Ω–¥—ã** - –¥–æ–±–∞–≤–ª–µ–Ω—ã
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–ª–Ω–∞—è (10 —Ñ–∞–π–ª–æ–≤, 3400+ —Å—Ç—Ä–æ–∫)

## –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (10)

### CI/CD
1. ‚úÖ `.github/workflows/build.yml` - GitHub Actions workflow

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
2. ‚úÖ `docker-compose.registry.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è registry –æ–±—Ä–∞–∑–æ–≤

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –ì–∞–π–¥—ã
3. ‚úÖ `devops/doc/guides/github-actions-intro.md` - –≤–≤–µ–¥–µ–Ω–∏–µ –≤ GitHub Actions
4. ‚úÖ `devops/doc/guides/github-registry-setup.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ ghcr.io

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –ü–ª–∞–Ω—ã
5. ‚úÖ `devops/doc/plans/d1-build-publish.md` - –ø–ª–∞–Ω (–∫–æ–ø–∏—è)
6. ‚úÖ `devops/doc/plans/d1-build-publish-plan.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è
7. ‚úÖ `devops/doc/D1_FIRST_RUN_CHECKLIST.md` - —á–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
8. ‚úÖ `devops/doc/D1_FILES_OVERVIEW.md` - –æ–±–∑–æ—Ä —Ñ–∞–π–ª–æ–≤
9. ‚úÖ `devops/doc/D1_README.md` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ D1
10. ‚úÖ `devops/doc/D1_IMPLEMENTATION_REPORT.md` - –æ—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
11. ‚úÖ `DOCKER_QUICKSTART.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker

### –ò—Ç–æ–≥–∏
12. ‚úÖ `SPRINT_D1_SUMMARY.md` - –∏—Ç–æ–≥–∏ —Å–ø—Ä–∏–Ω—Ç–∞

## –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (4)

1. ‚úÖ `docker-compose.yml` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
2. ‚úÖ `Makefile` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã –¥–ª—è registry
3. ‚úÖ `README.md` - badge, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ registry
4. ‚úÖ `devops/doc/devops-roadmap.md` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å D1

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –û–±—ä–µ–º —Ä–∞–±–æ—Ç

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ç—Ä–æ–∫ |
|-----------|------------|-------|
| –°–æ–∑–¥–∞–Ω–æ —Ñ–∞–π–ª–æ–≤ | 12 | 3514 |
| –û–±–Ω–æ–≤–ª–µ–Ω–æ —Ñ–∞–π–ª–æ–≤ | 4 | +150 |
| –ö–æ–¥ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | 3 | 120 |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 10 | 3394 |

### –ü–æ —Ç–∏–ø–∞–º —Ñ–∞–π–ª–æ–≤

| –¢–∏–ø | –§–∞–π–ª–æ–≤ | –°—Ç—Ä–æ–∫ |
|-----|--------|-------|
| YAML (GitHub Actions) | 1 | 65 |
| YAML (Docker Compose) | 1 | 35 |
| Makefile | 1 | +20 |
| Markdown (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è) | 10 | 3394 |
| Markdown (–æ–±–Ω–æ–≤–ª–µ–Ω–æ) | 2 | +150 |

### –í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: 1 —á–∞—Å
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: 2.5 —á–∞—Å–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: 3.5 —á–∞—Å–∞
- –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å: 1 —á–∞—Å
- **–ò—Ç–æ–≥–æ**: ~8 —á–∞—Å–æ–≤

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

–í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ –ø–ª–∞–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:

- [x] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ GitHub Actions
- [x] –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ GitHub Container Registry
- [x] –°–æ–∑–¥–∞—Ç—å GitHub Actions workflow –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ–±—Ä–∞–∑–æ–≤
- [x] –°–æ–∑–¥–∞—Ç—å docker-compose.registry.yml
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å registry –≤ Makefile
- [x] –°–æ–∑–¥–∞—Ç—å DOCKER_QUICKSTART.md
- [x] –û–±–Ω–æ–≤–∏—Ç—å README.md —Å badge –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- [x] –°–æ–∑–¥–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Å–ø—Ä–∏–Ω—Ç–∞
- [x] –û–±–Ω–æ–≤–∏—Ç—å devops roadmap —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º D1

## –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å

### 1. CI/CD Pipeline

**GitHub Actions workflow** —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –ø—Ä–∏ push –≤ main
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏ –Ω–∞ Pull Requests
- Matrix strategy –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ 3 –æ–±—Ä–∞–∑–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Docker layers (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 2-5 —Ä–∞–∑)
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ GitHub Container Registry
- –¢–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: latest –∏ sha-XXXXXX

### 2. –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã

**–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞** (`docker-compose.yml`):
- –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –í–∏–¥–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ä–∞–∑—É
- –ö–æ–º–∞–Ω–¥—ã: `make docker-build`, `make docker-up`

**Registry –æ–±—Ä–∞–∑—ã** (`docker-compose.registry.yml`):
- –î–ª—è production
- –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (~10-30 —Å–µ–∫)
- –ö–æ–º–∞–Ω–¥—ã: `make docker-pull`, `make docker-up-registry`

### 3. –£–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**Makefile –∫–æ–º–∞–Ω–¥—ã**:
```bash
make docker-pull           # Pull –∏–∑ registry
make docker-up-registry    # –ó–∞–ø—É—Å–∫ —Å registry
make docker-down-registry  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
make docker-logs-registry  # –õ–æ–≥–∏
make docker-status-registry # –°—Ç–∞—Ç—É—Å
```

### 4. –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤**:
- GitHub Actions - —á—Ç–æ —ç—Ç–æ –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- Troubleshooting

**–î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤**:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub permissions
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ workflow
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ visibility –æ–±—Ä–∞–∑–æ–≤

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**:
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã
- –í—ã–±–æ—Ä –º–µ–∂–¥—É local –∏ registry

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è D1 (—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

1. ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Workflow permissions –≤ GitHub
   - Settings ‚Üí Actions ‚Üí General ‚Üí Read and write permissions

2. ‚è≥ –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ push –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ main
   ```bash
   git add .
   git commit -m "feat(devops): Add Sprint D1 - Build & Publish"
   git push origin main
   ```

3. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ workflow
   - https://github.com/natapage/telegram-bot/actions

4. ‚è≥ –ò–∑–º–µ–Ω–∏—Ç—å visibility –æ–±—Ä–∞–∑–æ–≤ –Ω–∞ Public
   - Packages ‚Üí –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç ‚Üí Settings ‚Üí Change visibility

5. ‚è≥ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   ```bash
   make docker-pull
   make docker-up-registry
   curl http://localhost:8000/health
   ```

6. ‚è≥ –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
   - –û–±–Ω–æ–≤–∏—Ç—å SPRINT_D1_SUMMARY.md
   - –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å D1 –Ω–∞ ‚úÖ Completed

### –î–ª—è –Ω–∞—á–∞–ª–∞ D2 (Manual Deploy)

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è D1:

1. üìã –ü–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É (IP, SSH –∫–ª—é—á)
2. üìã –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω —Å–ø—Ä–∏–Ω—Ç–∞ D2
3. üìã –ù–∞–ø–∏—Å–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ —Ä—É—á–Ω–æ–º—É –¥–µ–ø–ª–æ—é
4. üìã –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
5. üìã –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∏ –ø—Ä–æ–±–ª–µ–º—ã

## –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å

### –ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (–ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ –ø—Ä–∏ –∫–∞–∂–¥–æ–º push
‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ –æ–±—Ä–∞–∑—ã –≤ ghcr.io
‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –±–µ–∑ —Å–±–æ—Ä–∫–∏
‚úÖ –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã (dev/prod)

### –ö —Å–ª–µ–¥—É—é—â–∏–º —Å–ø—Ä–∏–Ω—Ç–∞–º

‚úÖ **D2 - Manual Deploy**: –û–±—Ä–∞–∑—ã –≥–æ—Ç–æ–≤—ã –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
‚úÖ **D3 - Auto Deploy**: CI/CD –±–∞–∑–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –û–±—ã—á–Ω—ã–π workflow
git pull
make docker-build  # –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ
make docker-up
make docker-logs
```

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é
make docker-pull
make docker-up-registry
make docker-logs-registry
```

### –î–ª—è production (–±—É–¥—É—â–µ–µ)

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
docker-compose -f docker-compose.registry.yml pull
docker-compose -f docker-compose.registry.yml up -d
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ù–∞–≤–∏–≥–∞—Ü–∏—è

–ù–∞—á–Ω–∏—Ç–µ —Å: `devops/doc/D1_README.md`

–û—Ç—Ç—É–¥–∞ –≤—ã –Ω–∞–π–¥–µ—Ç–µ —Å—Å—ã–ª–∫–∏ –Ω–∞:
- –ì–∞–π–¥—ã –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤
- –ß–µ–∫–ª–∏—Å—Ç—ã –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –ë—ã—Å—Ç—Ä—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã

### –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏

- **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**: [DOCKER_QUICKSTART.md](../../DOCKER_QUICKSTART.md)
- **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫**: [D1_FIRST_RUN_CHECKLIST.md](D1_FIRST_RUN_CHECKLIST.md)
- **GitHub Actions**: [github-actions-intro.md](guides/github-actions-intro.md)
- **Registry Setup**: [github-registry-setup.md](guides/github-registry-setup.md)

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–ø—Ä–∏–Ω—Ç D1 —É—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞–ø–∏—Å–∞–Ω–∞, –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é workflow.

**–ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è**:
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π CI/CD pipeline
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- ‚úÖ –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã (flexibility)
- ‚úÖ –û–±—à–∏—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (3400+ —Å—Ç—Ä–æ–∫)
- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production deployment

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ workflow –∏ –ø–µ—Ä–µ—Ö–æ–¥ –∫ D2 - Manual Deploy

---

**–°–ø—Ä–∏–Ω—Ç**: D1 - Build & Publish
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
**–î–∞—Ç–∞**: 18 –æ–∫—Ç—è–±—Ä—è 2025
