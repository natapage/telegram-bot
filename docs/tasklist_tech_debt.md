# –ü–ª–∞–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞ –∏ —É–ª—É—á—à–µ–Ω–∏–π –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å

| –ò—Ç–µ—Ä–∞—Ü–∏—è | –ó–∞–¥–∞—á–∞ | –°—Ç–∞—Ç—É—Å | –î–∞—Ç–∞ |
|----------|--------|--------|------|
| 1 | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞ | üü¢ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-10-11 |
| 2 | –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ | üü¢ –ó–∞–≤–µ—Ä—à–µ–Ω–æ | 2025-10-11 |
| 3 | –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | üîµ –ù–µ –Ω–∞—á–∞—Ç–æ | - |
| 4 | –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ | üîµ –ù–µ –Ω–∞—á–∞—Ç–æ | - |

**–õ–µ–≥–µ–Ω–¥–∞**: üîµ –ù–µ –Ω–∞—á–∞—Ç–æ | üü° –í –ø—Ä–æ—Ü–µ—Å—Å–µ | üü¢ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## –ò—Ç–µ—Ä–∞—Ü–∏—è 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞

**–¶–µ–ª—å**: –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∞–≥–∏ –∏ —É–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

### –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [x] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `if not message.text: return` –≤ `handle_text()` (handler.py:64)
- [x] –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é `message.from_user` –Ω–∞ None –ø–µ—Ä–µ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ–º `user_id`

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ LLM API
- [x] –û–±–µ—Ä–Ω—É—Ç—å `client.chat.completions.create()` –≤ try/except (llm_client.py:36)
- [x] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `OpenAIError` –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `openai`
- [x] –û–±—Ä–∞–±–æ—Ç–∞—Ç—å `asyncio.TimeoutError` –æ—Ç–¥–µ–ª—å–Ω–æ
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ API —Å `self.logger.error("llm_api_error", error=str(e))`
- [x] Re-raise –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ handler

### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ MAX_CONTEXT_MESSAGES
- [x] –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ `_trim_history(history: list[dict]) -> list[dict]` –≤ DialogManager
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–µ–∑–∫—É: —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç + –ø–æ—Å–ª–µ–¥–Ω–∏–µ N*2 —Å–æ–æ–±—â–µ–Ω–∏–π (user+assistant –ø–∞—Ä—ã)
- [x] –í—ã–∑—ã–≤–∞—Ç—å `_trim_history()` –≤ –º–µ—Ç–æ–¥–µ `get_history()`
- [x] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ–±—Ä–µ–∑–∫–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ type hints –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ conventions.md
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å docstrings –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏–∑ vision.md
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ async/await –¥–ª—è –≤—Å–µ—Ö I/O –æ–ø–µ—Ä–∞—Ü–∏–π

**–¢–µ—Å—Ç**: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—É—Å—Ç–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–µ –¥–æ–ª–∂–Ω–æ –∫—Ä–∞—à–∏—Ç—å—Å—è), –æ—Ç–∫–ª—é—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—à–∏–±–∫–∞), –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–µ–∑–∫—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ MAX_CONTEXT_MESSAGES=5

---

## –ò—Ç–µ—Ä–∞—Ü–∏—è 2: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞

**–¶–µ–ª—å**: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ruff (—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä + –ª–∏–Ω—Ç–µ—Ä)
- [x] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: `uv add --dev ruff`
- [x] –°–æ–∑–¥–∞—Ç—å —Å–µ–∫—Ü–∏—é `[tool.ruff]` –≤ pyproject.toml
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `line-length = 120`
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `target-version = "py311"`
- [x] –í–∫–ª—é—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞: `select = ["E", "F", "I", "N", "UP", "B", "C4", "SIM", "TCH"]`
- [x] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `[tool.ruff.lint.isort]` —Å `known-first-party = ["src"]`

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è mypy (type checker)
- [x] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: `uv add --dev mypy`
- [x] –°–æ–∑–¥–∞—Ç—å —Å–µ–∫—Ü–∏—é `[tool.mypy]` –≤ pyproject.toml
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `python_version = "3.11"`
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `strict = true`
- [x] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `disallow_untyped_defs = true`

### Makefile –∫–æ–º–∞–Ω–¥—ã
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `make format` –¥–ª—è `ruff format src/`
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `make lint` –¥–ª—è `ruff check src/ && mypy src/`
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `make fix` –¥–ª—è `ruff check src/ --fix`
- [x] –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π Makefile, –Ω–µ —É–¥–∞–ª—è—è –∫–æ–º–∞–Ω–¥—É `run`

### –ü–µ—Ä–≤—ã–π –ø—Ä–æ–≥–æ–Ω –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å `make format` –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å `make lint` –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ ruff
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ mypy (–¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ type hints)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã —Å–ª–µ–¥—É—é—Ç –ø—Ä–∞–≤–∏–ª—É "1 –∫–ª–∞—Å—Å = 1 —Ñ–∞–π–ª"
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ (snake_case)
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ vision.md: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º KISS –∏–∑ conventions.md

**–¢–µ—Å—Ç**: –í—ã–ø–æ–ª–Ω–∏—Ç—å `make lint` –±–µ–∑ –æ—à–∏–±–æ–∫, –≤—ã–ø–æ–ª–Ω–∏—Ç—å `make format` –∏ —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–æ–¥ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è (—É–∂–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω)

---

## –ò—Ç–µ—Ä–∞—Ü–∏—è 3: –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¶–µ–ª—å**: –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ pytest
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `uv add --dev pytest pytest-asyncio pytest-cov`
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `tests/` —Å –ø–æ–¥–ø–∞–ø–∫–∞–º–∏ `unit/` –∏ `integration/`
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `tests/__init__.py` (–ø—É—Å—Ç–æ–π)
- [ ] –°–æ–∑–¥–∞—Ç—å `tests/conftest.py` —Å –±–∞–∑–æ–≤—ã–º–∏ fixtures

### Fixtures –∏ –º–æ–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å fixture `config` —Å –º–æ–∫–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ `monkeypatch`
- [ ] –°–æ–∑–¥–∞—Ç—å fixture `dialog_manager` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `config`
- [ ] –°–æ–∑–¥–∞—Ç—å fixture `logger` —Å –º–æ–∫–æ–º structlog.BoundLogger

### Unit-—Ç–µ—Å—Ç—ã –¥–ª—è Config
- [ ] –°–æ–∑–¥–∞—Ç—å `tests/unit/test_config.py`
- [ ] –¢–µ—Å—Ç: —É—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –¢–µ—Å—Ç: –≤—ã–±—Ä–æ—Å ValueError –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ TELEGRAM_BOT_TOKEN
- [ ] –¢–µ—Å—Ç: –≤—ã–±—Ä–æ—Å ValueError –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ OPENAI_API_KEY
- [ ] –¢–µ—Å—Ç: –≤—ã–±—Ä–æ—Å ValueError –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ SYSTEM_PROMPT
- [ ] –¢–µ—Å—Ç: –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### Unit-—Ç–µ—Å—Ç—ã –¥–ª—è DialogManager
- [ ] –°–æ–∑–¥–∞—Ç—å `tests/unit/test_dialog_manager.py`
- [ ] –¢–µ—Å—Ç: `get_history()` —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –∏—Å—Ç–æ—Ä–∏—é —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
- [ ] –¢–µ—Å—Ç: `add_message()` –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
- [ ] –¢–µ—Å—Ç: `clear_history()` —É–¥–∞–ª—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –¢–µ—Å—Ç: `_trim_history()` –æ–±—Ä–µ–∑–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ MAX_CONTEXT_MESSAGES > 0
- [ ] –¢–µ—Å—Ç: `_trim_history()` –Ω–µ –æ–±—Ä–µ–∑–∞–µ—Ç –ø—Ä–∏ MAX_CONTEXT_MESSAGES = 0

### Unit-—Ç–µ—Å—Ç—ã –¥–ª—è LLMClient
- [ ] –°–æ–∑–¥–∞—Ç—å `tests/unit/test_llm_client.py`
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `unittest.mock.AsyncMock` –¥–ª—è –º–æ–∫–∞ AsyncOpenAI
- [ ] –¢–µ—Å—Ç: —É—Å–ø–µ—à–Ω—ã–π –≤—ã–∑–æ–≤ `generate_response()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç
- [ ] –¢–µ—Å—Ç: –æ–±—Ä–∞–±–æ—Ç–∫–∞ OpenAIError –ø—Ä–∏ –æ—à–∏–±–∫–µ API
- [ ] –¢–µ—Å—Ç: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞

### Makefile –∏ coverage
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `make test` –¥–ª—è `pytest tests/ -v`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `make test-cov` –¥–ª—è `pytest tests/ -v --cov=src --cov-report=term-missing`
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é `[tool.coverage.run]` –≤ pyproject.toml —Å `source = ["src"]`
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `[tool.coverage.report]` —Å `fail_under = 80`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç type hints
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ async —Ç–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `@pytest.mark.asyncio`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ vision.md: –ø—Ä–∏–Ω—Ü–∏–ø "–±–µ–∑ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –Ω–∞—á–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ" –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ "–±–∞–∑–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ Dependency Injection –≤ —Ç–µ—Å—Ç–∞—Ö

**–¢–µ—Å—Ç**: –ó–∞–ø—É—Å—Ç–∏—Ç—å `make test` - –≤—Å–µ —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–π—Ç–∏, –∑–∞–ø—É—Å—Ç–∏—Ç—å `make test-cov` - coverage >= 80%

---

## –ò—Ç–µ—Ä–∞—Ü–∏—è 4: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

**–¶–µ–ª—å**: –£–ª—É—á—à–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∫–æ–¥–∞ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º SOLID –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ Protocol –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/protocols.py`
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å `LLMClientProtocol(Protocol)` —Å –º–µ—Ç–æ–¥–æ–º `generate_response()`
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å `DialogManagerProtocol(Protocol)` —Å –º–µ—Ç–æ–¥–∞–º–∏ `get_history()`, `add_message()`, `clear_history()`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å type hints –≤ MessageHandler –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Protocol

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ DialogManager (SRP)
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/dialog_repository.py` —Å –∫–ª–∞—Å—Å–æ–º `DialogRepository`
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ `dialogs: dict[int, list[dict]]` –≤ DialogRepository
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/dialog_context_service.py` —Å –∫–ª–∞—Å—Å–æ–º `DialogContextService`
- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–±—Ä–µ–∑–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ DialogContextService
- [ ] –û–±–Ω–æ–≤–∏—Ç—å DialogManager –∫–∞–∫ —Ñ–∞—Å–∞–¥ –Ω–∞–¥ Repository –∏ Service
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤

### Dependency Injection –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å `main.py` –¥–ª—è —è–≤–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- [ ] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ —Ñ—É–Ω–∫—Ü–∏—é `setup_dependencies(config, logger)`
- [ ] –í–æ–∑–≤—Ä–∞—â–∞—Ç—å tuple –∏–ª–∏ dataclass —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### –£–ª—É—á—à–µ–Ω–∏–µ error handling
- [ ] –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/exceptions.py` —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è–º–∏
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å `LLMAPIError(Exception)` –¥–ª—è –æ—à–∏–±–æ–∫ LLM API
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å `ConfigurationError(Exception)` –¥–ª—è –æ—à–∏–±–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å ValueError –≤ Config –Ω–∞ ConfigurationError
- [ ] –û–±–µ—Ä–Ω—É—Ç—å OpenAIError –≤ LLMAPIError –≤ LLMClient

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Single Responsibility –¥–ª—è –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Dependency Injection –≤–æ –≤—Å–µ—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ vision.md: "1 –∫–ª–∞—Å—Å = 1 —Ñ–∞–π–ª"
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏–π KISS (–∏–∑–±—ã—Ç–æ—á–Ω–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏)

### –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `make lint` –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `make test-cov` —Å coverage >= 80%
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å `make run` –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é
- [ ] –û–±–Ω–æ–≤–∏—Ç—å README.md —Å –Ω–æ–≤—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏ Makefile
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ docstrings –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

**–¢–µ—Å—Ç**: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª - `make format && make lint && make test-cov && make run`, –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –∫–æ–¥ —á–∏—â–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–µ–µ

---

**–°–ø—Ä–∞–≤–∫–∞**:
- –°–æ–≥–ª–∞—à–µ–Ω–∏—è: [conventions.md](./conventions.md)
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: [vision.md](./vision.md)
- –û—Å–Ω–æ–≤–Ω–æ–π plan: [tasklist.md](./tasklist.md)
