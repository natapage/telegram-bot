# Правила разработки кода

> **Полная техническая спецификация**: См. [@vision.md](./@vision.md)

## Основные принципы

### 1. KISS (Keep It Simple, Stupid)
- Максимальная простота, никакого оверинжиниринга
- Без преждевременной абстракции и оптимизации
- Прямые, понятные решения

### 2. Один класс = Один файл
- Строгое правило: 1 класс на 1 файл
- Имя файла соответствует имени класса (snake_case для файла, PascalCase для класса)
- Чёткое разделение ответственности

### 3. Async/Await
- Все I/O операции используют `async`/`await`
- Вызовы Telegram API: async
- Вызовы LLM API: async

### 4. Type Hints
- Обязательны для всех параметров функций
- Обязательны для всех возвращаемых значений
- Пример: `def process_message(user_id: int, text: str) -> str:`

### 5. Явное лучше неявного
- Никаких магических методов и метапрограммирования
- Понятные названия классов, методов, переменных
- Избегать сокращений

## Структура проекта

```
src/
├── main.py              # Точка входа
├── bot.py               # Класс Bot
├── handler.py           # Класс MessageHandler
├── llm_client.py        # Класс LLMClient
├── dialog_manager.py    # Класс DialogManager
└── config.py            # Класс Config
```

## Логгирование

- Использовать стандартный модуль `logging`
- Уровни: INFO для событий, ERROR для ошибок
- Формат: `logger.info(f"Message from user {user_id}: {text}")`

## Обработка ошибок

- Простые блоки try/except
- Понятные сообщения об ошибках для пользователя
- Полный traceback в логи

## Конфигурация

- Загрузка из `.env` через `python-dotenv`
- Доступ через класс `Config`
- Никаких захардкоженных значений

---

**Справка**: Полная архитектура, модели данных и сценарии в [@vision.md](./@vision.md)
