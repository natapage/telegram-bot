# –°–ø—Ä–∏–Ω—Ç F1 –ó–∞–≤–µ—Ä—à–µ–Ω ‚úÖ

> **–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 2025-10-17
> **–°—Ç–∞—Ç—É—Å**: –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω

---

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

### 1. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

**–°–æ–∑–¥–∞–Ω**: `doc/dashboard-requirements.md`

–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –¥–∞—à–±–æ—Ä–¥—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
- –ú–µ—Ç—Ä–∏–∫–∏ –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤
- –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º (day/week/month)

### 2. ‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç API

**–°–æ–∑–¥–∞–Ω—ã**:
- `src/api/schemas.py` - dataclasses –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö
- `doc/api-contract-example.json` - –ø–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä JSON –æ—Ç–≤–µ—Ç–∞

**–°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö**:
- `OverallStats` - –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `ActivityDataPoint` - —Ç–æ—á–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞
- `DialogPreview` - –ø—Ä–µ–≤—å—é –¥–∏–∞–ª–æ–≥–∞
- `UserActivity` - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `StatsResponse` - –ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç API

### 3. ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å StatCollector

**–°–æ–∑–¥–∞–Ω**: `src/api/stat_collector.py`

- `StatCollectorProtocol` (Protocol) - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π
- `StatsPeriod` (Enum) - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã (DAY, WEEK, MONTH)

### 4. ‚úÖ Mock —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω**: `src/api/mock_stat_collector.py`

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è `MockStatCollector` —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å —É—á–µ—Ç–æ–º –ø–µ—Ä–∏–æ–¥–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (24/7/30 —Ç–æ—á–µ–∫)
- –ò–º–∏—Ç–∞—Ü–∏—è –¥–Ω–µ–≤–Ω–æ–π/–Ω–µ–¥–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤ —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –¢–æ–ø 5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —É–±—ã–≤–∞—é—â–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é

### 5. ‚úÖ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–°–æ–∑–¥–∞–Ω—ã**:
- `src/api/app.py` - FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `src/api_main.py` - entrypoint –¥–ª—è –∑–∞–ø—É—Å–∫–∞

**Endpoints**:
- `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- `GET /stats?period={day|week|month}` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–§–∏—á–∏**:
- CORS middleware –¥–ª—è frontend
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- Swagger UI –Ω–∞ `/docs`
- ReDoc –Ω–∞ `/redoc`

### 6. ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `pyproject.toml`:
- `fastapi>=0.115.0`
- `uvicorn[standard]>=0.32.0`

### 7. ‚úÖ –ö–æ–º–∞–Ω–¥—ã Makefile

–û–±–Ω–æ–≤–ª–µ–Ω `Makefile`:
- `make run-api` - –∑–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞
- `make test-api` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints
- `make api-docs` - –ø–æ–∫–∞–∑–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### 8. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω—ã**:
- `doc/api-examples.md` - –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (curl, PowerShell, JavaScript)
- –û–±–Ω–æ–≤–ª–µ–Ω `frontend/README.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ Mock API

### 9. ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- –ö–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω: `ruff format`
- –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã: `ruff check` ‚úÖ
- –¢–∏–ø—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã: `mypy` ‚úÖ
- –í—Å–µ type hints –Ω–∞ –º–µ—Å—Ç–µ

### 10. ‚úÖ Roadmap –æ–±–Ω–æ–≤–ª–µ–Ω

- –°—Ç–∞—Ç—É—Å —Å–ø—Ä–∏–Ω—Ç–∞ F1: üü¢ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏—Ç—å API

```bash
make run-api
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: http://localhost:8000

### –®–∞–≥ 2: –û—Ç–∫—Ä—ã—Ç—å Swagger UI

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8000/docs

–ó–¥–µ—Å—å –≤—ã —Å–º–æ–∂–µ—Ç–µ:
- –£–≤–∏–¥–µ—Ç—å –≤—Å–µ endpoints
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å endpoints

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Swagger UI

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/docs
2. –†–∞—Å–∫—Ä–æ–π—Ç–µ endpoint `/stats`
3. –ù–∞–∂–º–∏—Ç–µ "Try it out"
4. –í—ã–±–µ—Ä–∏—Ç–µ period (day/week/month)
5. –ù–∞–∂–º–∏—Ç–µ "Execute"

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

```bash
# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
make test-api
```

#### –í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ curl/PowerShell

```bash
# Health check
curl http://localhost:8000/health

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –¥–µ–Ω—å
curl "http://localhost:8000/stats?period=day"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –Ω–µ–¥–µ–ª—é
curl "http://localhost:8000/stats?period=week"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü
curl "http://localhost:8000/stats?period=month"
```

PowerShell:
```powershell
Invoke-WebRequest -Uri "http://localhost:8000/health" | Select-Object -ExpandProperty Content
Invoke-WebRequest -Uri "http://localhost:8000/stats?period=day" | Select-Object -ExpandProperty Content
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

```
telegram-bot/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py                # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.py                     # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚≠ê
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py                 # Data contracts (dataclasses) ‚≠ê
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stat_collector.py          # Protocol interface ‚≠ê
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mock_stat_collector.py     # Mock —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ‚≠ê
‚îÇ   ‚îî‚îÄ‚îÄ api_main.py                    # Entrypoint –¥–ª—è API ‚≠ê
‚îú‚îÄ‚îÄ doc/
‚îÇ   ‚îú‚îÄ‚îÄ dashboard-requirements.md      # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è ‚≠ê
‚îÇ   ‚îú‚îÄ‚îÄ api-contract-example.json      # –ü—Ä–∏–º–µ—Ä JSON –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ ‚≠ê
‚îÇ   ‚îú‚îÄ‚îÄ api-examples.md                # –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ ‚≠ê
‚îÇ   ‚îú‚îÄ‚îÄ frontend-roadmap.md            # –û–±–Ω–æ–≤–ª–µ–Ω ‚úèÔ∏è
‚îÇ   ‚îî‚îÄ‚îÄ sprint-f1-completed.md         # –≠—Ç–æ—Ç —Ñ–∞–π–ª ‚≠ê
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îî‚îÄ‚îÄ README.md                      # –û–±–Ω–æ–≤–ª–µ–Ω ‚úèÔ∏è
‚îú‚îÄ‚îÄ Makefile                           # –û–±–Ω–æ–≤–ª–µ–Ω ‚úèÔ∏è
‚îî‚îÄ‚îÄ pyproject.toml                     # –û–±–Ω–æ–≤–ª–µ–Ω ‚úèÔ∏è
```

‚≠ê - –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
‚úèÔ∏è - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å |
|----------|--------|
| API –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `make run-api` | ‚úÖ |
| Endpoint GET /stats?period=day\|week\|month –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON | ‚úÖ |
| OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ http://localhost:8000/docs | ‚úÖ |
| Mock –¥–∞–Ω–Ω—ã–µ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–∏–æ–¥–∞–º | ‚úÖ |
| –í—Å–µ dataclasses –∏–º–µ—é—Ç type hints | ‚úÖ |
| –ö–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç `make lint` (ruff + mypy) | ‚úÖ |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ (frontend-roadmap.md –æ–±–Ω–æ–≤–ª–µ–Ω) | ‚úÖ |

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –°–ø—Ä–∏–Ω—Ç F2: –ö–∞—Ä–∫–∞—Å frontend –ø—Ä–æ–µ–∫—Ç–∞

–°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç –±—É–¥–µ—Ç –ø–æ—Å–≤—è—â–µ–Ω —Å–æ–∑–¥–∞–Ω–∏—é —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –æ—Å–Ω–æ–≤—ã frontend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

1. –°–æ–∑–¥–∞–Ω–∏–µ `frontend/doc/front-vision.md` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –≤–∏–¥–µ–Ω–∏–µ
2. –í—ã–±–æ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–µ–∫–∞ (React/Vue/Svelte + UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞)
3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (ESLint, Prettier, TypeScript)
5. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ F2 –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–∞—à–±–æ—Ä–¥–∞ (F3), –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–∑–¥–∞–Ω–Ω—ã–π Mock API.

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **API Documentation**: http://localhost:8000/docs (–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞)
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**: [doc/dashboard-requirements.md](./dashboard-requirements.md)
- **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤**: [doc/api-examples.md](./api-examples.md)
- **–ö–æ–Ω—Ç—Ä–∞–∫—Ç API**: [doc/api-contract-example.json](./api-contract-example.json)
- **Frontend README**: [frontend/README.md](../frontend/README.md)
- **Roadmap**: [doc/frontend-roadmap.md](./frontend-roadmap.md)

---

**–°–ø—Ä–∏–Ω—Ç F1 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω! üéâ**

Mock API –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ frontend –¥–∞—à–±–æ—Ä–¥–∞.
